<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Catálogo Librería Mi Limón</title>
<link rel="stylesheet" href="css/general.css">
<link rel="stylesheet" href="css/formulario.css">
<link rel="stylesheet" href="css/admin.css">
<script type="text/javascript">

function cargarDatos() {
    // URL del servlet
    let url = "ListarLibro";
    
    // Realiza la llamada al servlet
    fetch(url)
    .then(response => response.json())
    .then(data => {
        // Cuando se reciben los datos, llama a la función para pintar los resultados
        pintarResultados(data);
    })
    .catch(error => {
        console.error('Error al cargar los datos:', error);
    });
}

function pintarResultados(datos) {
	console.log(datos);
    // Obtiene el contenedor donde se mostrarán los resultados
    const contenedor = document.getElementById("resultados");
    // Limpiar el contenedor antes de agregar los nuevos datos
    contenedor.innerHTML = "";

    // Itera sobre los datos y crea un elemento HTML para cada libro
    datos.forEach(libro => {
        const libroDiv = document.createElement("div");
        libroDiv.classList.add("libro");
        libroDiv.setAttribute("data-id", libro.idLibro); //agrego atributo id data para poder tener un id para función borrar
        
        libroDiv.innerHTML = `
            <div id="cajaFoto">
            <img src="image/${libro.fotoPortada}" id="foto" alt="Portada del libro">
            </div>
            <div id="cajaLibro">
                <div id="titulo"><h1>${libro.tituloLibro}</h1></div>
                <div id="autor"><h2>${libro.nombreAutorLibro}</h2></div>
                <div id="apellido1"><h2>${libro.apellido1AutorLibro}</h2></div>
                <div id="apellido2"><h2>${libro.apellido2AutorLibro}</h2></div>
                <div id="genero"><h3>${libro.generoLibro}</h3></div>
                <div id="psinopsis">${libro.psinopsis}</div>
            </div>
        `;
        
        // Agrega el elemento del libro al contenedor
        contenedor.appendChild(libroDiv);
    });
}

 window.onload = function(){
	 cargarDatos();
 }


</script>

</head>
<body>

<div class="contenedor">
        <header class="header">
            <h1>LIBRERÍA MI LIMÓN</h1>
            <div class="img__back"></div>
        </header>
      
        <h2>Lista de libros</h2>
        <div id="resultados" class="contenedorLibros"></div>

<footer class="footer">
        <h4>FOOTER</h4>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Placeat labore quod quibusdam enim, saepe, dolor 
            maiores debitis maxime porro, deleniti nostrum! Sit distinctio eos magnam? Laborum qui 
            assumenda aut quas.</p>
    </footer>
    </div>

</body>
</html>