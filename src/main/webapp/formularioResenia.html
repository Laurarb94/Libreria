<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reseñas e interacción autores y usuarios</title>
<link rel="stylesheet" href="css/general.css">
<link rel="stylesheet" href="css/formulario.css">

<script type="text/javascript">
 
 function llamada(id){
		fetch('GestionResenia?idResenia='+id)
		.then(response => response.json())
		.then(data => pintarFormulario(data))
}

 

 // Funcion para otener el valor de un parametro en el GET 
 function getParameterByName(name) {
		    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
		    results = regex.exec(location.search);
		    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}
		
	function pintarFormulario(datos){
		document.getElementById("id").value = datos.IdReseña;
		document.getElementById("titulo").value = datos.nombre;
		document.getElementById("fecha").value = datos.fechaReseña;
		document.getElementById("calificacion").value = datos.calificacionReseña;
		document.getElementById("contenido").value = datos.contenido;
		document.getElementById("nombreEscribeResenia").value = datos.nombreUsuario;
	}
   		
   		window.onload = function(){
   			let id = getParameterByName("id");
			llamada(id);
		}
 
    </script>




</head>
<body>
	<div class="contenedor">
		<header class="header">
			<h1>BIBLIOTECA MI LIMÓN</h1>
			<div class="img__back"></div>
		</header>


		<div class="formulario">
			<h4>Formulario de Reseñas</h4>
			<form name="resenia" action="GestionResenia" method="Post" id="altas">
				<input type="hidden" id="id" name="id"> <input
					class="control" type="text" name="titulo" id="titulo"
					placeholder="Introduce el título del libro" required> <input
					class="control" type="date" name="fecha" id="fecha"
					placeholder="Introduce la fecha de hoy" required>
				<textarea class="control" id="contenido" name="contenido" cols="30"
					rows="10"></textarea>
				<br> <label for="calificación">Califica de 1 a 5 el
					libro, siendo 1 la nota más baja y 5 la más alta</label> <input
					class="control" type="number" name="calificacion" id="calificacion"
					min="1" max="5" required> <input class="control"
					type="text" name="nombreEscribeResenia" id="nombreEscribeResenia"
					placeholder="Escribe tu nombre" required> <input
					class="boton" type="submit" value="enviar reseña">
			</form>
		</div>

		<footer class="footer">
			<h4>Biblioteca Mi Limón</h4>
			<p>
				Si necesitas cualquier cosa, contáctanos aquí : <a
					href="mailto:bibliotecamilimon@milimon.es">bibliotecamilimon@milimon.es</a>
			</p>
			<p>Si prefieres, también estaremos encantadas de atenderte en:
				600100200</p>
			<p>Nuestro horario de atención: De Lunes a viernes de 10:00 a
				18:00</p>
		</footer>

	</div>
</body>
</html>